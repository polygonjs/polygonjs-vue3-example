var ft=(n=>(n.DRACOLoader="DRACOLoader",n.EXRLoader="EXRLoader",n.FBXLoader="FBXLoader",n.GLTFLoader="GLTFLoader",n.KTX2Loader="KTX2Loader",n.LDrawLoader="LDrawLoader",n.OBJLoader="OBJLoader",n.PDBLoader="PDBLoader",n.PLYLoader="PLYLoader",n.RGBELoader="RGBELoader",n.SVGLoader="SVGLoader",n.STLLoader="STLLoader",n.TTFLoader="TTFLoader",n))(ft||{});var St="139",bt={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},Et={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},Ct=0,Tt=1,wt=2;var Lt=0,Bt=1,Dt=2,Rt=3,_t=0,kt=1,Ut=2,It=1;var Gt=0,Pt=1,Ot=2,Ht=3,Nt=4,qt=5,Vt=100,Wt=101,Yt=102,Xt=103,$t=104,Zt=200,Jt=201,jt=202,zt=203,Kt=204,vt=205,Qt=206,te=207,ee=208,re=209,ne=210,se=0,ie=1,oe=2,ae=3,he=4,ce=5,pe=6,le=7,ue=0,xe=1,de=2,fe=0,me=1,ge=2,Fe=3,ye=4,Ae=5,X=300,Me=301,Se=302,be=303,Ee=304,Ce=306,$=1e3,P=1001,Z=1002,J=1003,Te=1004,we=1004,Le=1005,Be=1005,st=1006,De=1007,Re=1007,it=1008,_e=1008,ot=1009,ke=1010,Ue=1011,Ie=1012,Ge=1013,Pe=1014,Oe=1015,He=1016,Ne=1017,qe=1018,Ve=1020,We=1021,Ye=1022,at=1023,Xe=1024,$e=1025,Ze=1026,Je=1027,je=1028,ze=1029,Ke=1030,ve=1031,Qe=1033,tr=33776,er=33777,rr=33778,nr=33779,sr=35840,ir=35841,or=35842,ar=35843,hr=36196,cr=37492,pr=37496,lr=37808,ur=37809,xr=37810,dr=37811,fr=37812,mr=37813,gr=37814,Fr=37815,yr=37816,Ar=37817,Mr=37818,Sr=37819,br=37820,Er=37821,Cr=36492;var Tr=2300,wr=2301,Lr=2302,Br=2400,Dr=2401,Rr=2402,_r=2500,kr=2501;var Ur=1,Ir=2,ht=3e3,Gr=3001,Pr=3200,Or=3201,Hr=0,Nr=1;var y="srgb",M="srgb-linear";var qr=7680;var Vr=519,Wr=35044;var Yr="300 es",Xr=1035;var f=[];for(let n=0;n<256;n++)f[n]=(n<16?"0":"")+n.toString(16);var mt=Math.PI/180,gt=180/Math.PI;function H(){let n=Math.random()*4294967295|0,t=Math.random()*4294967295|0,e=Math.random()*4294967295|0,r=Math.random()*4294967295|0;return(f[n&255]+f[n>>8&255]+f[n>>16&255]+f[n>>24&255]+"-"+f[t&255]+f[t>>8&255]+"-"+f[t>>16&15|64]+f[t>>24&255]+"-"+f[e&63|128]+f[e>>8&255]+"-"+f[e>>16&255]+f[e>>24&255]+f[r&255]+f[r>>8&255]+f[r>>16&255]+f[r>>24&255]).toLowerCase()}function B(n,t,e){return Math.max(t,Math.min(e,n))}function ct(n,t){return(n%t+t)%t}function N(n,t,e){return(1-e)*n+e*t}function Zr(n){return n*mt}function Jr(n){return n*gt}function jr(n){return(n&n-1)===0&&n!==0}function zr(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function Kr(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}var D=class{constructor(t=0,e=0){this.x=t,this.y=e}get width(){return this.x}set width(t){this.x=t}get height(){return this.y}set height(t){this.y=t}set(t,e){return this.x=t,this.y=e,this}setScalar(t){return this.x=t,this.y=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y)}copy(t){return this.x=t.x,this.y=t.y,this}add(t,e){return e!==void 0?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this)}addScalar(t){return this.x+=t,this.y+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this}sub(t,e){return e!==void 0?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this)}subScalar(t){return this.x-=t,this.y-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this}multiply(t){return this.x*=t.x,this.y*=t.y,this}multiplyScalar(t){return this.x*=t,this.y*=t,this}divide(t){return this.x/=t.x,this.y/=t.y,this}divideScalar(t){return this.multiplyScalar(1/t)}applyMatrix3(t){let e=this.x,r=this.y,s=t.elements;return this.x=s[0]*e+s[3]*r+s[6],this.y=s[1]*e+s[4]*r+s[7],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this}clampLength(t,e){let r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(t,Math.min(e,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(t){return this.x*t.x+this.y*t.y}cross(t){return this.x*t.y-this.y*t.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){let e=this.x-t.x,r=this.y-t.y;return e*e+r*r}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this}lerpVectors(t,e,r){return this.x=t.x+(e.x-t.x)*r,this.y=t.y+(e.y-t.y)*r,this}equals(t){return t.x===this.x&&t.y===this.y}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t}fromBufferAttribute(t,e,r){return r!==void 0&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this}rotateAround(t,e){let r=Math.cos(e),s=Math.sin(e),i=this.x-t.x,o=this.y-t.y;return this.x=i*r-o*s+t.x,this.y=i*s+o*r+t.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}};D.prototype.isVector2=!0;function S(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function O(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}var j={[y]:{[M]:S},[M]:{[y]:O}},F={legacyMode:!0,get workingColorSpace(){return M},set workingColorSpace(n){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(n,t,e){if(this.legacyMode||t===e||!t||!e)return n;if(j[t]&&j[t][e]!==void 0){let r=j[t][e];return n.r=r(n.r),n.g=r(n.g),n.b=r(n.b),n}throw new Error("Unsupported color space conversion.")},fromWorkingColorSpace:function(n,t){return this.convert(n,this.workingColorSpace,t)},toWorkingColorSpace:function(n,t){return this.convert(n,t,this.workingColorSpace)}};var lt={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},d={r:0,g:0,b:0},A={h:0,s:0,l:0},q={h:0,s:0,l:0};function z(n,t,e){return e<0&&(e+=1),e>1&&(e-=1),e<1/6?n+(t-n)*6*e:e<1/2?t:e<2/3?n+(t-n)*6*(2/3-e):n}function V(n,t){return t.r=n.r,t.g=n.g,t.b=n.b,t}var R=class{constructor(t,e,r){return e===void 0&&r===void 0?this.set(t):this.setRGB(t,e,r)}set(t){return t&&t.isColor?this.copy(t):typeof t=="number"?this.setHex(t):typeof t=="string"&&this.setStyle(t),this}setScalar(t){return this.r=t,this.g=t,this.b=t,this}setHex(t,e=y){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(t&255)/255,F.toWorkingColorSpace(this,e),this}setRGB(t,e,r,s=M){return this.r=t,this.g=e,this.b=r,F.toWorkingColorSpace(this,s),this}setHSL(t,e,r,s=M){if(t=ct(t,1),e=B(e,0,1),r=B(r,0,1),e===0)this.r=this.g=this.b=r;else{let i=r<=.5?r*(1+e):r+e-r*e,o=2*r-i;this.r=z(o,i,t+1/3),this.g=z(o,i,t),this.b=z(o,i,t-1/3)}return F.toWorkingColorSpace(this,s),this}setStyle(t,e=y){function r(i){i!==void 0&&parseFloat(i)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}let s;if(s=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(t)){let i,o=s[1],c=s[2];switch(o){case"rgb":case"rgba":if(i=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(c))return this.r=Math.min(255,parseInt(i[1],10))/255,this.g=Math.min(255,parseInt(i[2],10))/255,this.b=Math.min(255,parseInt(i[3],10))/255,F.toWorkingColorSpace(this,e),r(i[4]),this;if(i=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(c))return this.r=Math.min(100,parseInt(i[1],10))/100,this.g=Math.min(100,parseInt(i[2],10))/100,this.b=Math.min(100,parseInt(i[3],10))/100,F.toWorkingColorSpace(this,e),r(i[4]),this;break;case"hsl":case"hsla":if(i=/^\s*(\d*\.?\d+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(c)){let p=parseFloat(i[1])/360,a=parseInt(i[2],10)/100,h=parseInt(i[3],10)/100;return r(i[4]),this.setHSL(p,a,h,e)}break}}else if(s=/^\#([A-Fa-f\d]+)$/.exec(t)){let i=s[1],o=i.length;if(o===3)return this.r=parseInt(i.charAt(0)+i.charAt(0),16)/255,this.g=parseInt(i.charAt(1)+i.charAt(1),16)/255,this.b=parseInt(i.charAt(2)+i.charAt(2),16)/255,F.toWorkingColorSpace(this,e),this;if(o===6)return this.r=parseInt(i.charAt(0)+i.charAt(1),16)/255,this.g=parseInt(i.charAt(2)+i.charAt(3),16)/255,this.b=parseInt(i.charAt(4)+i.charAt(5),16)/255,F.toWorkingColorSpace(this,e),this}return t&&t.length>0?this.setColorName(t,e):this}setColorName(t,e=y){let r=lt[t.toLowerCase()];return r!==void 0?this.setHex(r,e):console.warn("THREE.Color: Unknown color "+t),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(t){return this.r=t.r,this.g=t.g,this.b=t.b,this}copySRGBToLinear(t){return this.r=S(t.r),this.g=S(t.g),this.b=S(t.b),this}copyLinearToSRGB(t){return this.r=O(t.r),this.g=O(t.g),this.b=O(t.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(t=y){return F.fromWorkingColorSpace(V(this,d),t),B(d.r*255,0,255)<<16^B(d.g*255,0,255)<<8^B(d.b*255,0,255)<<0}getHexString(t=y){return("000000"+this.getHex(t).toString(16)).slice(-6)}getHSL(t,e=M){F.fromWorkingColorSpace(V(this,d),e);let r=d.r,s=d.g,i=d.b,o=Math.max(r,s,i),c=Math.min(r,s,i),p,a,h=(c+o)/2;if(c===o)p=0,a=0;else{let l=o-c;switch(a=h<=.5?l/(o+c):l/(2-o-c),o){case r:p=(s-i)/l+(s<i?6:0);break;case s:p=(i-r)/l+2;break;case i:p=(r-s)/l+4;break}p/=6}return t.h=p,t.s=a,t.l=h,t}getRGB(t,e=M){return F.fromWorkingColorSpace(V(this,d),e),t.r=d.r,t.g=d.g,t.b=d.b,t}getStyle(t=y){return F.fromWorkingColorSpace(V(this,d),t),t!==y?`color(${t} ${d.r} ${d.g} ${d.b})`:`rgb(${d.r*255|0},${d.g*255|0},${d.b*255|0})`}offsetHSL(t,e,r){return this.getHSL(A),A.h+=t,A.s+=e,A.l+=r,this.setHSL(A.h,A.s,A.l),this}add(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this}addColors(t,e){return this.r=t.r+e.r,this.g=t.g+e.g,this.b=t.b+e.b,this}addScalar(t){return this.r+=t,this.g+=t,this.b+=t,this}sub(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this}multiply(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this}multiplyScalar(t){return this.r*=t,this.g*=t,this.b*=t,this}lerp(t,e){return this.r+=(t.r-this.r)*e,this.g+=(t.g-this.g)*e,this.b+=(t.b-this.b)*e,this}lerpColors(t,e,r){return this.r=t.r+(e.r-t.r)*r,this.g=t.g+(e.g-t.g)*r,this.b=t.b+(e.b-t.b)*r,this}lerpHSL(t,e){this.getHSL(A),t.getHSL(q);let r=N(A.h,q.h,e),s=N(A.s,q.s,e),i=N(A.l,q.l,e);return this.setHSL(r,s,i),this}equals(t){return t.r===this.r&&t.g===this.g&&t.b===this.b}fromArray(t,e=0){return this.r=t[e],this.g=t[e+1],this.b=t[e+2],this}toArray(t=[],e=0){return t[e]=this.r,t[e+1]=this.g,t[e+2]=this.b,t}fromBufferAttribute(t,e){return this.r=t.getX(e),this.g=t.getY(e),this.b=t.getZ(e),t.normalized===!0&&(this.r/=255,this.g/=255,this.b/=255),this}toJSON(){return this.getHex()}};R.NAMES=lt;R.prototype.isColor=!0;R.prototype.r=1;R.prototype.g=1;R.prototype.b=1;var K=class{addEventListener(t,e){this._listeners===void 0&&(this._listeners={});let r=this._listeners;r[t]===void 0&&(r[t]=[]),r[t].indexOf(e)===-1&&r[t].push(e)}hasEventListener(t,e){if(this._listeners===void 0)return!1;let r=this._listeners;return r[t]!==void 0&&r[t].indexOf(e)!==-1}removeEventListener(t,e){if(this._listeners===void 0)return;let s=this._listeners[t];if(s!==void 0){let i=s.indexOf(e);i!==-1&&s.splice(i,1)}}dispatchEvent(t){if(this._listeners===void 0)return;let r=this._listeners[t.type];if(r!==void 0){t.target=this;let s=r.slice(0);for(let i=0,o=s.length;i<o;i++)s[i].call(this,t);t.target=null}}};var W=class{constructor(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}set(t,e,r,s,i,o,c,p,a){let h=this.elements;return h[0]=t,h[1]=s,h[2]=c,h[3]=e,h[4]=i,h[5]=p,h[6]=r,h[7]=o,h[8]=a,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(t){let e=this.elements,r=t.elements;return e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e[4]=r[4],e[5]=r[5],e[6]=r[6],e[7]=r[7],e[8]=r[8],this}extractBasis(t,e,r){return t.setFromMatrix3Column(this,0),e.setFromMatrix3Column(this,1),r.setFromMatrix3Column(this,2),this}setFromMatrix4(t){let e=t.elements;return this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]),this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){let r=t.elements,s=e.elements,i=this.elements,o=r[0],c=r[3],p=r[6],a=r[1],h=r[4],l=r[7],x=r[2],u=r[5],g=r[8],m=s[0],k=s[3],T=s[6],w=s[1],U=s[4],L=s[7],I=s[2],C=s[5],G=s[8];return i[0]=o*m+c*w+p*I,i[3]=o*k+c*U+p*C,i[6]=o*T+c*L+p*G,i[1]=a*m+h*w+l*I,i[4]=a*k+h*U+l*C,i[7]=a*T+h*L+l*G,i[2]=x*m+u*w+g*I,i[5]=x*k+u*U+g*C,i[8]=x*T+u*L+g*G,this}multiplyScalar(t){let e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this}determinant(){let t=this.elements,e=t[0],r=t[1],s=t[2],i=t[3],o=t[4],c=t[5],p=t[6],a=t[7],h=t[8];return e*o*h-e*c*a-r*i*h+r*c*p+s*i*a-s*o*p}invert(){let t=this.elements,e=t[0],r=t[1],s=t[2],i=t[3],o=t[4],c=t[5],p=t[6],a=t[7],h=t[8],l=h*o-c*a,x=c*p-h*i,u=a*i-o*p,g=e*l+r*x+s*u;if(g===0)return this.set(0,0,0,0,0,0,0,0,0);let m=1/g;return t[0]=l*m,t[1]=(s*a-h*r)*m,t[2]=(c*r-s*o)*m,t[3]=x*m,t[4]=(h*e-s*p)*m,t[5]=(s*i-c*e)*m,t[6]=u*m,t[7]=(r*p-a*e)*m,t[8]=(o*e-r*i)*m,this}transpose(){let t,e=this.elements;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this}getNormalMatrix(t){return this.setFromMatrix4(t).invert().transpose()}transposeIntoArray(t){let e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this}setUvTransform(t,e,r,s,i,o,c){let p=Math.cos(i),a=Math.sin(i);return this.set(r*p,r*a,-r*(p*o+a*c)+o+t,-s*a,s*p,-s*(-a*o+p*c)+c+e,0,0,1),this}scale(t,e){let r=this.elements;return r[0]*=t,r[3]*=t,r[6]*=t,r[1]*=e,r[4]*=e,r[7]*=e,this}rotate(t){let e=Math.cos(t),r=Math.sin(t),s=this.elements,i=s[0],o=s[3],c=s[6],p=s[1],a=s[4],h=s[7];return s[0]=e*i+r*p,s[3]=e*o+r*a,s[6]=e*c+r*h,s[1]=-r*i+e*p,s[4]=-r*o+e*a,s[7]=-r*c+e*h,this}translate(t,e){let r=this.elements;return r[0]+=t*r[2],r[3]+=t*r[5],r[6]+=t*r[8],r[1]+=e*r[2],r[4]+=e*r[5],r[7]+=e*r[8],this}equals(t){let e=this.elements,r=t.elements;for(let s=0;s<9;s++)if(e[s]!==r[s])return!1;return!0}fromArray(t,e=0){for(let r=0;r<9;r++)this.elements[r]=t[r+e];return this}toArray(t=[],e=0){let r=this.elements;return t[e]=r[0],t[e+1]=r[1],t[e+2]=r[2],t[e+3]=r[3],t[e+4]=r[4],t[e+5]=r[5],t[e+6]=r[6],t[e+7]=r[7],t[e+8]=r[8],t}clone(){return new this.constructor().fromArray(this.elements)}};W.prototype.isMatrix3=!0;function hn(n){for(let t=n.length-1;t>=0;--t)if(n[t]>65535)return!0;return!1}var Ft={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function cn(n,t){return new Ft[n](t)}function v(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}var _,Q=class{static getDataURL(t){if(/^data:/i.test(t.src)||typeof HTMLCanvasElement>"u")return t.src;let e;if(t instanceof HTMLCanvasElement)e=t;else{_===void 0&&(_=v("canvas")),_.width=t.width,_.height=t.height;let r=_.getContext("2d");t instanceof ImageData?r.putImageData(t,0,0):r.drawImage(t,0,0,t.width,t.height),e=_}return e.width>2048||e.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",t),e.toDataURL("image/jpeg",.6)):e.toDataURL("image/png")}static sRGBToLinear(t){if(typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&t instanceof ImageBitmap){let e=v("canvas");e.width=t.width,e.height=t.height;let r=e.getContext("2d");r.drawImage(t,0,0,t.width,t.height);let s=r.getImageData(0,0,t.width,t.height),i=s.data;for(let o=0;o<i.length;o++)i[o]=S(i[o]/255)*255;return r.putImageData(s,0,0),e}else if(t.data){let e=t.data.slice(0);for(let r=0;r<e.length;r++)e instanceof Uint8Array||e instanceof Uint8ClampedArray?e[r]=Math.floor(S(e[r]/255)*255):e[r]=S(e[r]);return{data:e,width:t.width,height:t.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),t}};var Y=class{constructor(t=null){this.uuid=H(),this.data=t,this.version=0}set needsUpdate(t){t===!0&&this.version++}toJSON(t){let e=t===void 0||typeof t=="string";if(!e&&t.images[this.uuid]!==void 0)return t.images[this.uuid];let r={uuid:this.uuid,url:""},s=this.data;if(s!==null){let i;if(Array.isArray(s)){i=[];for(let o=0,c=s.length;o<c;o++)s[o].isDataTexture?i.push(tt(s[o].image)):i.push(tt(s[o]))}else i=tt(s);r.url=i}return e||(t.images[this.uuid]=r),r}};function tt(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?Q.getDataURL(n):n.data?{data:Array.prototype.slice.call(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}Y.prototype.isSource=!0;var yt=0,b=class extends K{constructor(t=b.DEFAULT_IMAGE,e=b.DEFAULT_MAPPING,r=P,s=P,i=st,o=it,c=at,p=ot,a=1,h=ht){super();Object.defineProperty(this,"id",{value:yt++}),this.uuid=H(),this.name="",this.source=new Y(t),this.mipmaps=[],this.mapping=e,this.wrapS=r,this.wrapT=s,this.magFilter=i,this.minFilter=o,this.anisotropy=a,this.format=c,this.internalFormat=null,this.type=p,this.offset=new D(0,0),this.repeat=new D(1,1),this.center=new D(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new W,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=h,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(t){this.source.data=t}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(t){return this.name=t.name,this.source=t.source,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.encoding=t.encoding,this.userData=JSON.parse(JSON.stringify(t.userData)),this.needsUpdate=!0,this}toJSON(t){let e=t===void 0||typeof t=="string";if(!e&&t.textures[this.uuid]!==void 0)return t.textures[this.uuid];let r={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(t).uuid,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return JSON.stringify(this.userData)!=="{}"&&(r.userData=this.userData),e||(t.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(t){if(this.mapping!==X)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case $:t.x=t.x-Math.floor(t.x);break;case P:t.x=t.x<0?0:1;break;case Z:Math.abs(Math.floor(t.x)%2)===1?t.x=Math.ceil(t.x)-t.x:t.x=t.x-Math.floor(t.x);break}if(t.y<0||t.y>1)switch(this.wrapT){case $:t.y=t.y-Math.floor(t.y);break;case P:t.y=t.y<0?0:1;break;case Z:Math.abs(Math.floor(t.y)%2)===1?t.y=Math.ceil(t.y)-t.y:t.y=t.y-Math.floor(t.y);break}return this.flipY&&(t.y=1-t.y),t}set needsUpdate(t){t===!0&&(this.version++,this.source.needsUpdate=!0)}};b.DEFAULT_IMAGE=null;b.DEFAULT_MAPPING=X;b.prototype.isTexture=!0;var ut=class{constructor(t,e,r){let s=this,i=!1,o=0,c=0,p,a=[];this.onStart=void 0,this.onLoad=t,this.onProgress=e,this.onError=r,this.itemStart=function(h){c++,i===!1&&s.onStart!==void 0&&s.onStart(h,o,c),i=!0},this.itemEnd=function(h){o++,s.onProgress!==void 0&&s.onProgress(h,o,c),o===c&&(i=!1,s.onLoad!==void 0&&s.onLoad())},this.itemError=function(h){s.onError!==void 0&&s.onError(h)},this.resolveURL=function(h){return p?p(h):h},this.setURLModifier=function(h){return p=h,this},this.addHandler=function(h,l){return a.push(h,l),this},this.removeHandler=function(h){let l=a.indexOf(h);return l!==-1&&a.splice(l,2),this},this.getHandler=function(h){for(let l=0,x=a.length;l<x;l+=2){let u=a[l],g=a[l+1];if(u.global&&(u.lastIndex=0),u.test(h))return g}return null}}},xt=new ut;var et=class{constructor(t){this.manager=t!==void 0?t:xt,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(t,e){let r=this;return new Promise(function(s,i){r.load(t,s,e,i)})}parse(){}setCrossOrigin(t){return this.crossOrigin=t,this}setWithCredentials(t){return this.withCredentials=t,this}setPath(t){return this.path=t,this}setResourcePath(t){return this.resourcePath=t,this}setRequestHeader(t){return this.requestHeader=t,this}};var rt={enabled:!1,files:{},add:function(n,t){this.enabled!==!1&&(this.files[n]=t)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};var E={},At=class extends et{constructor(t){super(t)}load(t,e,r,s){t===void 0&&(t=""),this.path!==void 0&&(t=this.path+t),t=this.manager.resolveURL(t);let i=rt.get(t);if(i!==void 0)return this.manager.itemStart(t),setTimeout(()=>{e&&e(i),this.manager.itemEnd(t)},0),i;if(E[t]!==void 0){E[t].push({onLoad:e,onProgress:r,onError:s});return}E[t]=[],E[t].push({onLoad:e,onProgress:r,onError:s});let o=new Request(t,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),c=this.mimeType,p=this.responseType;fetch(o).then(a=>{if(a.status===200||a.status===0){if(a.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||a.body===void 0||a.body.getReader===void 0)return a;let h=E[t],l=a.body.getReader(),x=a.headers.get("Content-Length"),u=x?parseInt(x):0,g=u!==0,m=0,k=new ReadableStream({start(T){w();function w(){l.read().then(({done:U,value:L})=>{if(U)T.close();else{m+=L.byteLength;let I=new ProgressEvent("progress",{lengthComputable:g,loaded:m,total:u});for(let C=0,G=h.length;C<G;C++){let nt=h[C];nt.onProgress&&nt.onProgress(I)}T.enqueue(L),w()}})}}});return new Response(k)}else throw Error(`fetch for "${a.url}" responded with ${a.status}: ${a.statusText}`)}).then(a=>{switch(p){case"arraybuffer":return a.arrayBuffer();case"blob":return a.blob();case"document":return a.text().then(h=>new DOMParser().parseFromString(h,c));case"json":return a.json();default:if(c===void 0)return a.text();{let l=/charset="?([^;"\s]*)"?/i.exec(c),x=l&&l[1]?l[1].toLowerCase():void 0,u=new TextDecoder(x);return a.arrayBuffer().then(g=>u.decode(g))}}}).then(a=>{rt.add(t,a);let h=E[t];delete E[t];for(let l=0,x=h.length;l<x;l++){let u=h[l];u.onLoad&&u.onLoad(a)}}).catch(a=>{let h=E[t];if(h===void 0)throw this.manager.itemError(t),a;delete E[t];for(let l=0,x=h.length;l<x;l++){let u=h[l];u.onError&&u.onError(a)}this.manager.itemError(t)}).finally(()=>{this.manager.itemEnd(t)}),this.manager.itemStart(t)}setResponseType(t){return this.responseType=t,this}setMimeType(t){return this.mimeType=t,this}};var dt=class extends b{constructor(t=null,e=1,r=1,s,i,o,c,p,a=J,h=J,l,x){super(null,o,c,p,a,h,s,i,l,x);this.image={data:t,width:e,height:r},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}};dt.prototype.isDataTexture=!0;export{St as a,bt as b,Et as c,Ct as d,Tt as e,wt as f,Lt as g,Bt as h,Dt as i,Rt as j,_t as k,kt as l,Ut as m,It as n,Gt as o,Pt as p,Ot as q,Ht as r,Nt as s,qt as t,Vt as u,Wt as v,Yt as w,Xt as x,$t as y,Zt as z,Jt as A,jt as B,zt as C,Kt as D,vt as E,Qt as F,te as G,ee as H,re as I,ne as J,se as K,ie as L,oe as M,ae as N,he as O,ce as P,pe as Q,le as R,ue as S,xe as T,de as U,fe as V,me as W,ge as X,Fe as Y,ye as Z,Ae as _,X as $,Me as aa,Se as ba,be as ca,Ee as da,Ce as ea,$ as fa,P as ga,Z as ha,J as ia,Te as ja,we as ka,Le as la,Be as ma,st as na,De as oa,Re as pa,it as qa,_e as ra,ot as sa,ke as ta,Ue as ua,Ie as va,Ge as wa,Pe as xa,Oe as ya,He as za,Ne as Aa,qe as Ba,Ve as Ca,We as Da,Ye as Ea,at as Fa,Xe as Ga,$e as Ha,Ze as Ia,Je as Ja,je as Ka,ze as La,Ke as Ma,ve as Na,Qe as Oa,tr as Pa,er as Qa,rr as Ra,nr as Sa,sr as Ta,ir as Ua,or as Va,ar as Wa,hr as Xa,cr as Ya,pr as Za,lr as _a,ur as $a,xr as ab,dr as bb,fr as cb,mr as db,gr as eb,Fr as fb,yr as gb,Ar as hb,Mr as ib,Sr as jb,br as kb,Er as lb,Cr as mb,Tr as nb,wr as ob,Lr as pb,Br as qb,Dr as rb,Rr as sb,_r as tb,kr as ub,Ur as vb,Ir as wb,ht as xb,Gr as yb,Pr as zb,Or as Ab,Hr as Bb,Nr as Cb,qr as Db,Vr as Eb,Wr as Fb,Yr as Gb,Xr as Hb,mt as Ib,gt as Jb,H as Kb,B as Lb,Zr as Mb,Jr as Nb,jr as Ob,zr as Pb,Kr as Qb,W as Rb,D as Sb,K as Tb,R as Ub,hn as Vb,cn as Wb,v as Xb,Q as Yb,Y as Zb,b as _b,dt as $b,rt as ac,ut as bc,et as cc,ft as dc,At as ec};
