import{d as D,e as S}from"./chunk-YGXD56TG.js";var O=(s=>(s.EXPORT_MANIFEST="scene/export_manifest.json",s.CODE_PREFIX="scene/code",s.PROPERTIES="scene/code/properties.json",s.EDITOR="scene/editor.json",s.ASSETS="scene/assets.json",s.POLYGONJS="js/all.js",s.SCENE_DATA_LOADER="js/sceneDataLoader.js",s.POLY_CONFIG="js/polyConfig.js",s.JS_FILES="scene/js_files.json",s.POSTER="images/poster.png",s))(O||{});var M=class{static async importSceneData(e){e.editorMode==null&&(e.editorMode=!1);let n=e.manifest,r=e.urlPrefix||O.CODE_PREFIX,c=Object.keys(n.nodes),a=[];for(let o of c){let t=n.nodes[o],l=`${r}/root/${o}.json?t=${t}`;a.push(l)}let i=`${r}/root.json?t=${n.root}`,p=`${r}/properties.json?t=${n.properties}`,d=[i,p];if(e.editorMode){let o=Date.now();d.push(`${r}/ui.json?t=${o}`)}for(let o of a)d.push(o);let P=0,y=d.length,R=o=>{let t=S.sceneData,l=t.start+t.mult*o;e.onProgress&&e.onProgress(l),D.dispatchProgressEvent(l,e.sceneName)},E=d.map(async o=>{let t=await fetch(o);return P++,R(P/y),t}),_=await Promise.all(E),u=[];for(let o of _)u.push(await o.json());let j={root:u[0],properties:u[1]},m=2;e.editorMode&&(j.ui=u[2],m+=1);let g={},f=Object.keys(n.nodes);for(let o=0;o<f.length;o++){let t=f[o],l=u[o+m];g[t]=l}return this.assemble(j,f,g)}static async assemble(e,n,r){let c={root:e.root,properties:e.properties,ui:e.ui};for(let a=0;a<n.length;a++){let i=n[a],p=r[i];this.insert_child_data(c.root,i,p)}return c}static insert_child_data(e,n,r){let c=n.split("/");if(c.length==1)e.nodes||(e.nodes={}),e.nodes[n]=r;else{let a=c.shift(),i=c.join("/"),p=e.nodes[a];this.insert_child_data(p,i,r)}}};var A="1650548211589",I="1650548211589",T={geo1:"1650548211589","geo1/COP":"1650548211589","geo1/MAT":"1650548211589",perspectiveCamera1:"1650548211589","perspectiveCamera1/events1":"1650548211589",ocean:"1650548211589"},w={properties:A,root:I,nodes:T};var x=async s=>{let e=s.sceneDataRoot||"./polygonjs/scenes";return await M.importSceneData({sceneName:"scene_01",urlPrefix:e+"/scene_01",manifest:w,onProgress:s.onProgress})};var N=async function(s){let{onProgress:e,domElement:n,configureSceneData:r,autoPlay:c,sceneDataRoot:a,assetsRoot:i,libsRootPrefix:p,printWarnings:d}=s,P=s.runRegister!=null?s.runRegister:!0,R=(s.loadModules!=null?s.loadModules:!0)?[]:[],E=[import("./loadSceneFromSceneData-ECHXM6QZ.js"),x({onProgress:e,sceneDataRoot:a})],_=await Promise.all(E),{Poly:u,loadSceneFromSceneData_scene_01:j}=_[0],m=_[1];r&&r(m);let g=[];for(let t=2;t<_.length;t++)g.push(_[t]);let f=0;for(let t of R){let l=t+"Module";u.registerModule(g[f][l]),f++}return await j({onProgress:e,sceneData:m,domElement:n,runRegister:P,autoPlay:c,assetsRoot:i,libsRootPrefix:p,printWarnings:d})};export{N as loadSceneAndMountAsync_scene_01};
